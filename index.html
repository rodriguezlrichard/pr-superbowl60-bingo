<!DOCTYPE html>
<html>
<head>
    <title>Philanthropy Roundtable Bingo</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèà</text></svg>">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body { font-family: 'Arial', sans-serif; text-align: center; background-color: #f0f0f0; padding: 20px; }
        
        /* LOGO */
        .logo { max-width: 250px; height: auto; margin-bottom: 5px; }
        
        h1 { color: #003366; margin: 5px 0; font-size: 24px; }
        p { margin-top: 0; color: #555; }
        
        /* LOGIN SCREEN LAYOUT */
        #login-screen { 
            display: block; 
            margin-top: 30px; 
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        input[type="text"] { 
            padding: 12px; 
            font-size: 16px; 
            width: 80%; 
            border-radius: 5px; 
            border: 1px solid #ccc; 
            margin-bottom: 15px; /* Added space below input */
        }
        
        /* PRIZE TEXT - MOVED TO TOP */
        .prize-alert {
            color: #003366;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 25px; /* Space below prize box */
            padding: 12px;
            background-color: #e6f0ff;
            display: block; /* Takes full width of container */
            border-radius: 8px;
            border: 1px solid #b3d1ff;
        }

        /* BROWSER WARNING TEXT */
        .browser-warning {
            font-size: 12px; 
            color: #888; 
            margin-top: 40px; 
            line-height: 1.4;
            background: rgba(255,255,255,0.5);
            padding: 10px;
            border-radius: 8px;
            border: 1px dashed #ccc;
        }
        
        /* BINGO BOARD LAYOUT */
        #game-screen { display: none; }
        .bingo-card {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            width: 95%; 
            max-width: 800px;
            margin: 20px auto;
            background: #222;
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .square {
            background: white;
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4px;
            font-size: clamp(9px, 1.5vw, 15px); 
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            text-align: center;
            line-height: 1.2;
            min-width: 0;
            word-wrap: break-word;
            overflow: hidden;
            border-radius: 4px;
        }
        
        .square.active { background-color: #ffcc00; color: #333; }
        .free-space { background-color: #eee; color: #555; }
        
        /* MAIN BUTTONS */
        .btn {
            padding: 12px 30px; font-size: 18px; 
            cursor: pointer; background-color: #003366; color: white; 
            border: none; border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover { background-color: #002244; transform: translateY(-1px); }
        
        /* MODAL OVERLAY */
        #modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); 
            z-index: 99;
        }

        /* WIN BANNER */
        #win-banner {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 400px;
            background-color: #003366; 
            color: white;
            padding: 30px 20px;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            z-index: 100;
            text-align: center;
        }
        #win-banner h2 { margin-top: 0; font-size: 28px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <img src="logo.png" alt="Philanthropy Roundtable" class="logo" onerror="this.style.display='none'">

    <div id="login-screen">
        <form id="login-form">
            <h1>Super Bowl LX Bingo</h1>
            
            <div class="prize-alert">
                üèÜ The first two winners will get to pick a <br>Roundtable Swag item from our store!
            </div>

            <p>Enter your name to generate your official board.</p>
            
            <input type="text" id="username" placeholder="First and Last Name" autocomplete="off">
            <br>
            <button class="btn" type="submit">Start Game</button>

            <div class="browser-warning">
                ‚ö†Ô∏è <strong>Playing in Outlook or Teams?</strong><br>
                Tap the <strong>‚Ä¢‚Ä¢‚Ä¢</strong> menu and choose <em>"Open in Chrome/Safari"</em> so you don't lose your board if the app refreshes!
            </div>
        </form>
    </div>

    <div id="game-screen">
        <h1>Welcome, <span id="display-name"></span>!</h1>
        <p>Tap squares to mark them.</p>
        <div class="bingo-card" id="card"></div>
        <button class="btn" id="bingo-btn">I Have Bingo!</button>
        <br><br>
        <small style="color:#999; cursor:pointer;" id="reset-btn">[Reset/New Player]</small>
    </div>

    <div id="modal-overlay"></div>

    <div id="win-banner">
        <h2>üéâ BINGO! üéâ</h2>
        <p style="color: #ddd; font-size: 16px; margin-bottom: 25px; line-height: 1.4;">
            Click below to officially timestamp your victory.
        </p>
        <button class="btn" style="background: white; color: #003366; font-weight:bold; padding: 15px 35px; font-size: 18px; margin-top: 0;" id="claim-btn">Submit Victory</button>
        <br><br>
        <button id="close-win-btn" style="background:none; border:none; color:#ccc; text-decoration:underline; cursor:pointer;">Close</button>
    </div>

    <script>
        // --- DATA SECTION ---
        const options = [
            "Coin Toss: Heads",
            "Coin Toss: Tails",
            "National Anthem over 2 mins",
            "Coach throws headset",
            "Review/Challenge Flag",
            "Missed Field Goal",
            "Interception",
            "Sack",
            "Touchdown Dance Celebration",
            "Fan with Face Paint Shown",
            "Uncomfortable Political Ad",
            "Emotional Big Pharma Ad",
            "Cardi B is Mentioned or Shown",
            "Anne Michael Maye Mentioned or Shown",
            "Green Day says something political",
            "FanDuel Commercial",
            "Coors Commercial",
            "Turbotax Commercial",
            "Movie Trailer",
            "Sydney Sweeney Cameo in Ad",
            "Halftime: Costume Change",
            "Halftime: Guest Star",
            "Fans Waving Puerto Rican Flags",
            "Announcers mention 'Patriots Dynasty'",
            "Failed Challenge",
            "Fumble",
            "Drake Maye Passing Touchdown",
            "Sam Darnold Passing Touchdown",
            "Jaxson Smith-Njigba Touchdown",
            "Field Goal over 50 yards",
            "Pass Interference Penalty",
            "False Start Penalty",
            "Owner shown in luxury box",
            "A Team mascot is shown",
            "The Seahawks Interception on the One yard line is mentioned",
            "2-Point Conversion",
            "Holding Penalty",
            "Commercial: Some AI tool is Advertised",
            "Commercial: Ben Affleck does a Boston Accent",
            "Shane Gillis in a Commercial",
            "Roger Goodell gets Booed",
            "Superbowl Rematch Brought Up",
            "Bad Bunny comparison to previous Halftime shows",
            "Upset/In Shock Fan is shown",
            "Marshawn Lynch Shocked Face is Referenced or Shown",
            "Chris Collinsworth mentions Patrick Mahomes",
            "Olympics are Mentioned by Announcers",
            "Chain Gang Measurement",
            "Timeout called due to confusion"
        ];

        let gameState = { name: "", board: [], marked: [] };

        document.addEventListener('DOMContentLoaded', () => {
            const loginForm = document.getElementById('login-form');
            if(loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    startGame();
                });
            }
            document.getElementById('bingo-btn').addEventListener('click', checkBingoManually);
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            document.getElementById('claim-btn').addEventListener('click', submitToForm);
            document.getElementById('close-win-btn').addEventListener('click', closeBanner);

            const savedState = localStorage.getItem('pr_bingo_state_2026');
            if (savedState) {
                try {
                    gameState = JSON.parse(savedState);
                    showGame();
                } catch(e) {
                    console.error(e);
                    localStorage.removeItem('pr_bingo_state_2026');
                }
            }
        });

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            const nameInput = document.getElementById('username').value.trim();
            if (!nameInput) { alert("Please enter your name."); return; }
            gameState.name = nameInput;
            gameState.board = shuffle([...options]).slice(0, 24);
            gameState.board.splice(12, 0, "FREE SPACE"); 
            gameState.marked = new Array(25).fill(false);
            gameState.marked[12] = true; 
            saveState();
            showGame();
        }

        function showGame() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('display-name').innerText = gameState.name;
            renderBoard();
        }

        function renderBoard() {
            const card = document.getElementById('card');
            card.innerHTML = "";
            gameState.board.forEach((text, index) => {
                const div = document.createElement('div');
                div.className = 'square';
                if (gameState.marked[index]) div.classList.add('active');
                if (index === 12) div.classList.add('free-space');
                div.innerText = text;
                div.onclick = () => toggleSquare(index);
                card.appendChild(div);
            });
        }

        function toggleSquare(index) {
            if (index === 12) return; 
            gameState.marked[index] = !gameState.marked[index];
            saveState();
            renderBoard();
        }

        function saveState() {
            localStorage.setItem('pr_bingo_state_2026', JSON.stringify(gameState));
        }

        function resetGame() {
            if(confirm("Are you sure? This will delete your current board.")) {
                localStorage.removeItem('pr_bingo_state_2026');
                location.reload();
            }
        }

        function checkBingoManually() {
            document.getElementById('modal-overlay').style.display = 'block';
            document.getElementById('win-banner').style.display = 'block';
        }

        function closeBanner() {
            document.getElementById('modal-overlay').style.display = 'none';
            document.getElementById('win-banner').style.display = 'none';
        }

        function submitToForm() {
            // Note: Ensure 'File Upload' is deleted from Google Form for this to work without login.
            const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLScR8wTiALevIGCqyOovQCoYVC5Hi309DoC5sg3F3nitNMVZUw/viewform?usp=pp_url&entry.828186722=NAME_HOLDER&entry.1629981459=SQUARES_HOLDER";
            
            // 1. Get Winning Squares
            const winningSquares = gameState.board.filter((_, i) => gameState.marked[i]).join(", ");
            
            // 2. Add Timestamp to the squares list for Tie-Breaking
            const timestamp = new Date().toLocaleTimeString();
            const finalSquaresData = `[WIN TIME: ${timestamp}] - ${winningSquares}`;

            const safeName = encodeURIComponent(gameState.name);
            const safeSquares = encodeURIComponent(finalSquaresData);

            const finalUrl = formUrl.replace("NAME_HOLDER", safeName).replace("SQUARES_HOLDER", safeSquares);
            window.open(finalUrl, '_blank');
        }
    </script>
</body>
</html>


